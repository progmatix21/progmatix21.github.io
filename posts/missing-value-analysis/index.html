<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Missing Value Analysis - Progmatix 21</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="Progmatix 21" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">Progmatix 21</div>
					<div class="logo__tagline">My learnings: byte by byte</div>
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Missing Value Analysis</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" class="meta__icon icon icon-calendar" width="18" height="16" 
	 viewBox="0 0 458 458" style="enable-background:new 0 0 458 458;" xml:space="preserve">
<g>
	<path d="M111.938,135.598c11.046,0,20-8.954,20-20V21.597c0-11.046-8.954-20-20-20s-20,8.954-20,20v94.001
		C91.938,126.644,100.892,135.598,111.938,135.598z"/>
	<path d="M346.063,135.598c11.046,0,20-8.954,20-20V21.597c0-11.046-8.954-20-20-20s-20,8.954-20,20v94.001
		C326.063,126.644,335.017,135.598,346.063,135.598z"/>
	<path d="M443,82.403h-46.938c0,12.42,0,20.918,0,33.195c0,27.614-22.386,50-50,50c-27.614,0-50-22.386-50-50
		c0-12.281,0-20.771,0-33.195H161.938c0,12.42,0,20.918,0,33.195c0,27.614-22.386,50-50,50c-27.614,0-50-22.386-50-50
		c0-12.281,0-20.771,0-33.195H15c-8.284,0-15,6.716-15,15v89.641h458V97.403C458,89.119,451.284,82.403,443,82.403z"/>
	<path d="M0,441.403c0,8.284,6.716,15,15,15h428c8.284,0,15-6.716,15-15V227.044H0V441.403z M244.191,313.046
		c0-6.036,3.59-11.504,9.127-13.907c7.49-3.249,16.316-9.028,21.176-13.393c2.782-2.499,6.38-3.88,10.121-3.88h19.254
		c4.395,0,7.957,3.563,7.957,7.958v80.903h11.445c8.275,0,14.984,6.708,14.984,14.984c0,8.275-6.708,14.984-14.984,14.984h-59.934
		c-8.275,0-14.984-6.708-14.984-14.984c0-8.275,6.708-14.984,14.984-14.984h14.567V317.66c-2.163,2.886-6.797,6.077-12.243,8.754
		c-4.618,2.27-10.076,2.008-14.445-0.711c-4.369-2.718-7.025-7.501-7.025-12.647V313.046z M123.295,390.677
		c2.691-29.175,18.127-37.168,47.125-52.83c4.622-2.493,12.811-7.06,15.92-11.134c3.842-5.044,1.97-18.001-14.359-18.001
		c-5.549,0-11.094,1.106-17.704,5.967c-6.262,4.605-14.984,3.637-20.067-2.244l-0.594-0.688c-3.026-3.501-4.246-8.216-3.31-12.747
		s3.925-8.371,8.09-10.387c22.329-10.811,56.654-13.101,73.853,0.952c7.977,6.523,11.966,15.332,11.966,26.43
		c0,32.434-40.129,38.997-54.315,54.731h41.622c8.275,0,14.984,6.708,14.984,14.984c0,8.275-6.708,14.984-14.984,14.984h-79.1
		c-2.577,0-5.036-1.095-6.772-3C123.914,395.789,123.059,393.243,123.295,390.677z"/>
</g>
</svg>
<time class="meta__text" datetime="2022-06-24T22:12:49&#43;05:30">June 24, 2022</time></div>
<div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/data-science/" rel="category">data science</a>
	</span>
</div><div class="meta__item-categories meta__item">
	<span class="meta__text">
		<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>598 words/3 min read
	</span>
</div>
</div>
		</header>
		
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
	    <details>
	        <summary>Click to toggle</summary>
		        <nav id="TableOfContents">
  <ul>
    <li><a href="#create-a-synthetic-dataframe-_with-missing-values_">Create a synthetic dataframe <em>(with missing values)</em></a></li>
    <li><a href="#count-the-missing-values">Count the missing values</a></li>
    <li><a href="#visualization-as-a-bar-graph">Visualization as a bar graph</a></li>
    <li><a href="#visualization-as-a-heatmap">Visualization as a heatmap</a></li>
    <li><a href="#to-drop-or-not-to-drop">To drop or not to drop</a></li>
  </ul>
</nav>
		    </details>
	</div>
</div>
<div class="content post__content clearfix">
			<h2 id="create-a-synthetic-dataframe-_with-missing-values_">Create a synthetic dataframe <em>(with missing values)</em></h2>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">from</span> <span style="color:#00f;font-weight:bold">sklearn.datasets</span> <span style="color:#008000;font-weight:bold">import</span> make_classification
</code></pre></div><div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">numfeat <span style="color:#666">=</span> <span style="color:#666">7</span>
numrows <span style="color:#666">=</span> <span style="color:#666">100</span>
sample_df <span style="color:#666">=</span> pd<span style="color:#666">.</span>DataFrame(make_classification(n_features <span style="color:#666">=</span> numfeat)[<span style="color:#666">0</span>]) <span style="color:#408080;font-style:italic">#We just take the features part and discard the label part</span>
sample_df<span style="color:#666">.</span>shape
</code></pre></div><pre><code>(100, 7)
</code></pre>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#408080;font-style:italic">#Let us give the columns alphabetical names</span>
colnames <span style="color:#666">=</span> [<span style="color:#008000">chr</span>(<span style="color:#666">0x41</span><span style="color:#666">+</span>i) <span style="color:#008000;font-weight:bold">for</span> i <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#008000">range</span>(numfeat)]
sample_df<span style="color:#666">.</span>columns <span style="color:#666">=</span> colnames
<span style="color:#008000;font-weight:bold">print</span>(sample_df)
</code></pre></div><pre><code>           A         B         C         D         E         F         G
0  -0.127194  1.236139 -0.992594  0.642372 -0.301938 -0.338470       NaN
1  -0.756942 -0.379475  0.854811  0.297301 -0.100486  0.227557  0.939396
2  -1.133766 -1.350423 -1.142068  0.088902 -1.240435  0.326618  2.098233
3  -0.833053 -0.685877 -1.295095  0.204945 -1.278842       NaN  1.270936
4        NaN -0.340500  0.351410  0.447896  0.372048  0.260806  1.075568
..       ...       ...       ...       ...       ...       ...       ...
95 -1.440925  0.963312  2.160002  1.334175  0.953738  0.763906  0.298397
96 -1.182199 -1.223739 -0.269553  0.176725 -0.117301 -0.034381  2.024914
97 -0.783330  0.183404 -0.798328  0.570219  1.000458  0.414616  0.462967
98  0.720470 -0.963628       NaN -0.886744 -0.170301 -0.647375  0.276774
99 -3.419854 -0.969928 -0.721836  1.682513  1.072179  1.907760  3.586141

[100 rows x 7 columns]
</code></pre>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#408080;font-style:italic">#Having got this dataframe, let us pepper it with random np.nan values.</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">random</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">numpy</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">np</span>
<span style="color:#408080;font-style:italic">#list of rows and columns to drop values from</span>
row_list <span style="color:#666">=</span> <span style="color:#008000">list</span>(<span style="color:#008000">range</span>(numrows)) 
col_list <span style="color:#666">=</span> <span style="color:#008000">list</span>(<span style="color:#008000">range</span>(numfeat))
random<span style="color:#666">.</span>seed(<span style="color:#666">42</span>) <span style="color:#408080;font-style:italic">#to get reproducible results</span>
<span style="color:#408080;font-style:italic">#Since we have 2000 values, let us populate about 50 NaNs in the dataset.</span>
<span style="color:#008000;font-weight:bold">for</span> i <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#008000">range</span>(<span style="color:#666">50</span>):
    random_row <span style="color:#666">=</span> random<span style="color:#666">.</span>choice(row_list)
    random_col <span style="color:#666">=</span> random<span style="color:#666">.</span>choice(col_list)
    sample_df<span style="color:#666">.</span>iloc[random_row,random_col] <span style="color:#666">=</span> np<span style="color:#666">.</span>nan
</code></pre></div><div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">print</span>(sample_df)
</code></pre></div><pre><code>           A         B         C         D         E         F         G
0  -0.127194  1.236139 -0.992594  0.642372 -0.301938 -0.338470       NaN
1  -0.756942 -0.379475  0.854811  0.297301 -0.100486  0.227557  0.939396
2  -1.133766 -1.350423 -1.142068  0.088902 -1.240435  0.326618  2.098233
3  -0.833053 -0.685877 -1.295095  0.204945 -1.278842       NaN  1.270936
4        NaN -0.340500  0.351410  0.447896  0.372048  0.260806  1.075568
..       ...       ...       ...       ...       ...       ...       ...
95 -1.440925  0.963312  2.160002  1.334175  0.953738  0.763906  0.298397
96 -1.182199 -1.223739 -0.269553  0.176725 -0.117301 -0.034381  2.024914
97 -0.783330  0.183404 -0.798328  0.570219  1.000458  0.414616  0.462967
98  0.720470 -0.963628       NaN -0.886744 -0.170301 -0.647375  0.276774
99 -3.419854 -0.969928 -0.721836  1.682513  1.072179  1.907760  3.586141

[100 rows x 7 columns]
</code></pre>
<hr>
<h2 id="count-the-missing-values">Count the missing values</h2>
<p><strong>Which are the columns with the most missing values?</strong></p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">mvcount_df <span style="color:#666">=</span> pd<span style="color:#666">.</span>DataFrame(sample_df<span style="color:#666">.</span>isnull()<span style="color:#666">.</span>sum()<span style="color:#666">.</span>sort_values(ascending<span style="color:#666">=</span>False),
                          columns <span style="color:#666">=</span> [<span style="color:#ba2121">&#39;mvcount&#39;</span>])
<span style="color:#408080;font-style:italic">#We get a dataframe indexed on the feature name</span>
mvcount_df[<span style="color:#ba2121">&#39;mvpc&#39;</span>] <span style="color:#666">=</span> mvcount_df[<span style="color:#ba2121">&#39;mvcount&#39;</span>]<span style="color:#666">/</span>sample_df<span style="color:#666">.</span>shape[<span style="color:#666">0</span>] <span style="color:#408080;font-style:italic">#get the missing value percentage</span>
<span style="color:#008000;font-weight:bold">print</span>(mvcount_df)                       
</code></pre></div><pre><code>   mvcount  mvpc
E        9  0.09
F        9  0.09
G        8  0.08
A        7  0.07
B        7  0.07
D        5  0.05
C        4  0.04
</code></pre>
<h2 id="visualization-as-a-bar-graph">Visualization as a bar graph</h2>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">matplotlib.pyplot</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">plt</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">seaborn</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">sns</span>
fig, ax <span style="color:#666">=</span> plt<span style="color:#666">.</span>subplots(<span style="color:#666">1</span>,<span style="color:#666">1</span>,figsize<span style="color:#666">=</span>(<span style="color:#666">10</span>,<span style="color:#666">4</span>))
sns<span style="color:#666">.</span>barplot(x<span style="color:#666">=</span> mvcount_df[<span style="color:#ba2121">&#39;mvcount&#39;</span>], y<span style="color:#666">=</span> mvcount_df<span style="color:#666">.</span>index, ax<span style="color:#666">=</span>ax)

</code></pre></div><pre><code>&lt;AxesSubplot:xlabel='mvcount'&gt;
</code></pre>
<p><img src="output_17_1.png" alt="png"></p>
<h2 id="visualization-as-a-heatmap">Visualization as a heatmap</h2>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">seaborn</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">sns</span>
<span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">matplotlib.pyplot</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">plt</span>
fig,ax <span style="color:#666">=</span> plt<span style="color:#666">.</span>subplots(<span style="color:#666">1</span>,<span style="color:#666">1</span>,figsize<span style="color:#666">=</span>(<span style="color:#666">12</span>,<span style="color:#666">4</span>))
sns<span style="color:#666">.</span>heatmap(sample_df<span style="color:#666">.</span>isnull(), yticklabels<span style="color:#666">=</span>False, cbar<span style="color:#666">=</span>False, cmap<span style="color:#666">=</span><span style="color:#ba2121">&#39;Blues&#39;</span>, ax<span style="color:#666">=</span>ax)
</code></pre></div><pre><code>&lt;AxesSubplot:&gt;
</code></pre>
<p><img src="output_19_1.png" alt="png"></p>
<h2 id="to-drop-or-not-to-drop">To drop or not to drop</h2>
<p>Dropping or not dropping rows or columns is a decision that depends on the particular
dataset and the purpose of your analysis. All we will do here is learn how to
appreciate the implications of dropping rows or columns.</p>
<p>Let us drop the feature with most missing values and see how many rows we lose.</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#408080;font-style:italic">#From our example E is the one with the most missing values</span>
<span style="color:#408080;font-style:italic">#We will drop the column E and after that all rows with missing values</span>
<span style="color:#008000;font-weight:bold">print</span>(f<span style="color:#ba2121">&#34;{sample_df.drop([&#39;E&#39;], axis=1).dropna().shape[0]} rows remain after the drop operation&#34;</span> )
</code></pre></div><pre><code>65 rows remain after the drop operation
</code></pre>
<p>This shows that 65 rows remain after the previous operations. To get the number of rows dropped:</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000;font-weight:bold">print</span>(<span style="color:#ba2121">&#34;No. of rows dropped: &#34;</span>)
sample_df<span style="color:#666">.</span>shape[<span style="color:#666">0</span>] <span style="color:#666">-</span> sample_df<span style="color:#666">.</span>drop([<span style="color:#ba2121">&#39;E&#39;</span>], axis<span style="color:#666">=</span><span style="color:#666">1</span>)<span style="color:#666">.</span>dropna()<span style="color:#666">.</span>shape[<span style="color:#666">0</span>]
</code></pre></div><pre><code>No. of rows dropped: 
35
</code></pre>
<p>Depending on the dataset or the purpose of the analysis, we could drop more columns
and decide whether losing the data rows is still acceptable for the analysis.</p>
<p>Or we could impute values&hellip;, which would be a topic in itself.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/eda/" rel="tag">EDA</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/howto/" rel="tag">howto</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/neat-wordcount-histograms/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Neat Wordcount Histograms</p>
		</a>
	</div>
</nav>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
<div class="footer__links">
	<a class="footer__link" href="/about/">About</a>
</div>
		<div class="footer__copyright">
			&copy; 2023 Atrij Talgery.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>